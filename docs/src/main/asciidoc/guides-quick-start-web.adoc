:imagesdir: ./images
[[quick-start-web]]
==== Quick Start - Web

In this guide both consumer and provider are Web applications written in Typescript language and run in https://electron.atom.io/[Electron].

===== Run example

include::guides-quick-start-launch-broker-step.adoc[]

. Launch `WebCcyPairRateViewer`:
+
[source, bash]
-----
plexus activate vendorB.fx.WebCcyPairRateViewer
-----
+
include::guides-quick-start-activate-app.adoc[]

. In the opened window enter a currency pair name, e.g. `EURUSD` and click `Request`:
+
image::quick-start-web-1.png[Quick Start Web 1]
+
include::guides-quick-start-invocation-workflow.adoc[]
+
[NOTE]
====
A custom launcher called `ElectronAppLauncher` is used in this example to launch Electron apps.
It shows how easily you can implement custom app launchers for custom ways of launching apps (e.g. for apps running in different containers similar to Electron).

Check section <<guides-how-to-write-custom-app-launcher, How to write custom app launcher>> for details.
====

. Broker starts `WebCcyPairRateProvider` app and redirects request to it:
+
image::quick-start-web-2.png[Quick Start Web 2]

. The viewer app shows the rate received from provider:
+
image::quick-start-web-3.png[Quick Start Web 3]

===== Modify example

Let's take a closer look to example and improve the provided service with ability to provide real-time updates.
We're going to change contract between two applications, pass the changed interop metadata to broker, update apps and run them again.

====== Modify metadata

First we need to modify interop registry and pass the changed metadata to broker.

. Open `registry/fx/CcyPairRateService.proto` file and add new `GetRateStream` method:
+
[source, php]
./registry/fx/CcyPairRateService.proto
-----
service CcyPairRateService {
    rpc GetRate(CcyPair) returns (CcyPairRate);

    // new rpc call returning real-time notification stream
    rpc GetRateStream(CcyPair) returns (stream CcyPairRate);
}
-----

. Open `registry/vendorA/fx/WebCcyPairRateProvider.interop` file and change provided method to `GetRateStream`:
+
[source, php]
./registry/vendorA/fx/WebCcyPairRateProvider.interop
-----
package vendorA.fx;

import "fx/CcyPairRateService.proto";

application WebCcyPairRateProvider {
    provides fx.CcyPairRateService {
        GetRateStream [method_title = "Web Provider - Get Rate Stream"];
    }
}
-----

. Open `registry/vendorB/fx/WebCcyPairRateViewer.interop` file and change consumed method to `GetRateStream`:
+
[source, php]
./registry/vendorB/fx/WebCcyPairRateViewer.interop
-----
package vendorB.fx;

import "fx/CcyPairRateService.proto";

application WebCcyPairRateViewer {
    consumes fx.CcyPairRateService { GetRateStream; }
}
-----

. To pass the changed metadata to broker, navigate back to `bin\win-x86\samples\quick-start` and re-generate metadata using *plexusgen* tool:
+
[source, bash]
-----
java -jar ../../sdk/plexusgen.jar --type=json_meta --baseDir=registry --out=metadata
-----
+
[NOTE]
====
Broker tracks `interop.json` file and automatically reloads metadata when the file is changed.
====

====== Modify and build provider app

TODO

====== Modify and build consumer app

TODO

====== Launch the modified example

. Launch `CcyPairRateViewer`:
+
[source, bash]
-----
plexus activate vendorB.fx.WebCcyPairRateViewer
-----

. In the opened window enter a currency pair name, e.g. `EURUSD` and press `Enter`:
+
TODO screenshot

. Broker starts `WebCcyPairRateProvider` app and redirects request to it:
+
TODO screenshot

. The viewer app shows rates received from provider:
+
TODO screenshot